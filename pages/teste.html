<div id="background"></div>
<div id="pageTeste">
    <h1 id="title">Âncoras de Carreira</h1>

    <div id="teste">
        <form id="formDados">
            <label for="inputNome">Nome:</label>
            <input type="text" id="inputNome" name="nome" class="form-control" placeholder="Digite seu nome...">
            
            <br><label for="inputNome">Data de Nascimento:</label>
            <input type="date" id="inputData" name="dataNascimento" class="form-control">

            <br><label for="inputNome">E-mail:</label>
            <input type="email" id="inputEmail" name="email" class="form-control">

            <br><span id="termos">Declaro que autorizo a FEI acessar as respostas dadas por mim neste teste de Âncoras de Carreira:</span><br>
            <input type="radio" id="acessarRespostaSim" name="acessarResposta" value="sim" checked><label for="acessarRespostaSim">Estou de acordo</label>&nbsp;&nbsp;
            <input type="radio" id="acessarRespostaNao" name="acessarResposta" value="nao"><label for="acessarRespostaNao">Não estou de acordo</label>

            <br><br><span id="termos">Autorizo a FEI me enviar e-mails com dicas e possibilidades de carreira com base no resultado do meu teste:</span><br>
            <input type="radio" id="enviarEmailSim" name="enviarEmail" value="sim" checked><label for="enviarEmailSim">Autorizo</label>&nbsp;&nbsp;
            <input type="radio" id="enviarEmailNao" name="enviarEmail" value="nao"><label for="enviarEmailNao">Não autorizo</label>

            <button id="btnIniciar" class="btn">Iniciar</button>
        </form>
        <form id="formPerguntas">  
        </form>
        
    </div>
    <div id="resultado">
        <div class="row">
            <div class="col-md-6">
                <h4>Nome: <span id="nome"></span></h4>
            </div>
            <div class="col-md-6">
                <h4>Emitido as: <span id="data"></span></h4>
            </div>
            <div class="col-md-6 col-sm-12" id="A">
                <div class="card text-center">
                    <div class="card-header">
                        A - Competencia técnica/funcional
                    </div>
                    <div class="card-body">
                        <h5 class="card-title" id="compA">0.00</h5>
                    </div>
                    <div class="card-footer">
                        <div class="accordion" id="accordionA">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingA">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseA" aria-expanded="true" aria-controls="collapseA">
                                    Competência A
                                </button>
                                </h2>
                                <div id="collapseA" class="accordion-collapse collapse show" aria-labelledby="headingA" data-bs-parent="#accordionA">
                                <div class="accordion-body">
                                    Pessoas tecnicamente ancoradas comprometem-se com uma carreira de especialização. Elas ficam motivadas quando são especialistas em um determinado assunto, buscam trabalhos desafiadores, querem testar o conhecimento e a habilidade que têm em sua área de atuação. São pessoas que não visam altos cargos administrativos (essas, normalmente, são mais generalistas), e sim cargos de especialista em uma determinada área.
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-sm-12" id="B">
                <div class="card text-center">
                    <div class="card-header">
                        B - Competencia administrativa/geral
                    </div>
                    <div class="card-body">
                        <h5 class="card-title" id="compB">0.00</h5>
                    </div>
                    <div class="card-footer">
                        <div class="accordion" id="accordionB">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingB">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseB" aria-expanded="true" aria-controls="collapseB">
                                    Competência B
                                </button>
                                </h2>
                                <div id="collapseB" class="accordion-collapse collapse show" aria-labelledby="headingB" data-bs-parent="#accordionB">
                                <div class="accordion-body">
                                    Quem tem como âncora de carreira a competência administrativa geral busca, ao longo de sua vida profissional, atingir os mais altos niveis de responsabilidade na organização. São pessoas que visam a liderança e têm como motivação atingir o topo da hierarquia corporativa. Para elas, a especialização é uma armadilha: entendem a importância de conhecer as áreas funcionais, mas não buscam se aprofundar tecnicamente, pois querem a função de gerência-geral.
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-sm-12" id="C">
                <div class="card text-center">
                    <div class="card-header">
                        C - Autonomia e independência
                    </div>
                    <div class="card-body">
                        <h5 class="card-title" id="compC">0.00</h5>
                    </div>
                    <div class="card-footer">
                        <div class="accordion" id="accordionC">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingC">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseC" aria-expanded="true" aria-controls="collapseC">
                                    Competência C
                                </button>
                                </h2>
                                <div id="collapseC" class="accordion-collapse collapse show" aria-labelledby="headingC" data-bs-parent="#accordionC">
                                <div class="accordion-body">
                                    Pessoas com essa âncora vão buscar, com o passar do tempo, uma carreira que possibilite maior independência, que permita impor suas próprias condições. A autonomia é inerente a qualquer ser humano, em níveis diferentes, mas quem tem fortemente essa âncora sente a necessidade de ser dono de seu próprio destino, fazer as coisas do seu jeito; por isso, vai organizar sua vida profissional em torno de trabalhos que lhe proporcionem mais escolha e poder de decisão.
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-sm-12" id="D">
                <div class="card text-center">
                    <div class="card-header">
                        D - Segurança e estabilidade
                    </div>
                    <div class="card-body">
                        <h5 class="card-title" id="compD">0.00</h5>
                    </div>
                    <div class="card-footer">
                        <div class="accordion" id="accordionD">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingD">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseD" aria-expanded="true" aria-controls="collapseD">
                                    Competência D
                                </button>
                                </h2>
                                <div id="collapseD" class="accordion-collapse collapse show" aria-labelledby="headingD" data-bs-parent="#accordionD">
                                <div class="accordion-body">
                                    Aqui se enquadram pessoas que precisam se sentir seguras no ambiente de trabalho. Elas buscam maior previsibilidade do futuro, querem "saber onde pisam". São atraídas por empregos em empresas que oferecem essa estabilidade, com bons planos de aposentadoria e boa reputação. É essa estabilidade, principalmente financeira, que vai guiar a carreira desses profissionais.
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-sm-12" id="E">
                <div class="card text-center">
                    <div class="card-header">
                        E - Criatividade empreendedora
                    </div>
                    <div class="card-body">
                        <h5 class="card-title" id="compE">0.00</h5>
                    </div>
                    <div class="card-footer">
                        <div class="accordion" id="accordionE">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingE">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseE" aria-expanded="true" aria-controls="collapseE">
                                    Competência E
                                </button>
                                </h2>
                                <div id="collapseE" class="accordion-collapse collapse show" aria-labelledby="headingE" data-bs-parent="#accordionE">
                                <div class="accordion-body">
                                    Nessa âncora, estão os profissionais com tino para a criação de novos negócios e organizações. Não são pessoas necessariamente com criatividade artística, mas sim com um espírito empreendedor, que querem estabelecer ou reestruturar negócios próprios. Têm motivação para, desde cedo, iniciar empreendimentos para ganhar dinheiro. Vale ressaltar que o enfoque aqui não é a busca por autonomia, e sim pela criação de negócios.
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-sm-12" id="F">
                <div class="card text-center">
                    <div class="card-header">
                        F - Dedicação a uma causa
                    </div>
                    <div class="card-body">
                        <h5 class="card-title" id="compF">0.00</h5>
                    </div>
                    <div class="card-footer">
                        <div class="accordion" id="accordionF">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingF">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseF" aria-expanded="true" aria-controls="collapseF">
                                    Competência F
                                </button>
                                </h2>
                                <div id="collapseF" class="accordion-collapse collapse show" aria-labelledby="headingF" data-bs-parent="#accordionF">
                                <div class="accordion-body">
                                    Pessoas com essa âncora são orientadas em sua carreira por valores que querem imprimir em seu trabalho. Elas se voltam para os valores e se dedicam a causas, mais do que aos seus talentos e competências. São profissionais que querem, de alguma forma, contribuir para um mundo melhor por meio de seu trabalho.
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-sm-12" id="G">
                <div class="card text-center">
                    <div class="card-header">
                        G - Desafio puro
                    </div>
                    <div class="card-body">
                        <h5 class="card-title" id="compG">0.00</h5>
                    </div>
                    <div class="card-footer">
                        <div class="accordion" id="accordionG">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingG">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseG" aria-expanded="true" aria-controls="collapseG">
                                    Competência G
                                </button>
                                </h2>
                                <div id="collapseG" class="accordion-collapse collapse show" aria-labelledby="headingG" data-bs-parent="#accordionG">
                                <div class="accordion-body">
                                    Nessa âncora, se encaixam profissionais que definem sucesso como a superação de obstáculos impossíveis ou como a capacidade de solucionar problemas insolúveis. São pessoas que necessitam sentir que podem conquistar qualquer coisa. A busca por desafios permeia a carreira de quase todo mundo, mas, para quem é ancorado no desafio puro, é o que norteia a sua trajetória - todas as suas decisões profissionais vão sempre ser com o objetivo de superar desafios cada vez maiores.
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-sm-12" id="H">
                <div class="card text-center">
                    <div class="card-header">
                        H - Estilo de vida
                    </div>
                    <div class="card-body">
                        <h5 class="card-title" id="compH">0.00</h5>
                    </div>
                    <div class="card-footer">
                        <div class="accordion" id="accordionH">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingH">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseH" aria-expanded="true" aria-controls="collapseH">
                                    Competência H
                                </button>
                                </h2>
                                <div id="collapseH" class="accordion-collapse collapse show" aria-labelledby="headingH" data-bs-parent="#accordionH">
                                <div class="accordion-body">
                                    Muitas vezes, interpretam essa âncora como sendo a de pessoas que não dão prioridade à sua carreira, mas não se trata disso. A questão é que pessoas ancoradas pelo estilo de vida buscam encontrar uma forma de integrar todas as suas necessidades: individuais, de família e de carreira. Podem ser altamente motivadas pelo trabalho, mas entendem que ele deve ser apenas uma parte de sua vida como um todo.
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <button id="btnSalvarResultado" class="btn btn-success">Salvar Resultado</button><button id="btnVoltarPerguntas" class="btn btn-primary">Voltar</button>
    </div><br>
</div><br><br>

<script>
     $('input[type=radio][name=acessarResposta]').on('change', function() {
        let val = $('input[type=radio][name=acessarResposta]:checked').val();

        if(val == "nao"){
            $("#btnIniciar").attr('disabled', true);
        }else{
            $("#btnIniciar").attr('disabled', false);
        }
     });

     $("#btnIniciar").on('click', function(e) {
        e.preventDefault();

        let vazios = false;
        $('#formDados input').each(function() {
            if ($(this).val() === "" || $(this).val() == null) {
                $(this).css('border', '1px solid red');
                vazios = true;
            }else{
                $(this).css('border', 'var(--bs-border-width) solid var(--bs-border-color)');
            }
        });

        if(vazios){
            Swal.fire(
                'Ops...',
                'Preencha todos os campos',
                'warning'
            );
            return;
        }

        let nome = $("#inputNome").val();
        let data = $("#inputData").val();
        let email = $("#inputEmail").val();
        let acessarResposta = $("input[type=radio][name=acessarResposta]:checked").val();
        let enviarEmail = $("input[type=radio][name=enviarEmail]:checked").val();

        window.sessionStorage.setItem('nome', nome);
        window.sessionStorage.setItem('data', data);
        window.sessionStorage.setItem('email', email);
        window.sessionStorage.setItem('acessarResposta', acessarResposta);
        window.sessionStorage.setItem('enviarEmail', enviarEmail);

        $("#formDados").hide();
        $("#formPerguntas").show();
        $("#background").css("height", $('body').height());
     })
</script>

<!-- Escrita das perguntas -->
<script>
    const perguntas = {
        'pergunta1': 'Sonho em ser tão bom no que faço que minha opinião de especialista seja sempre solicitada ',
        'pergunta2': 'Me sinto mais realizado em meu trabalho quando sou capaz de integrar e gerenciar o trabalho dos outros ',
        'pergunta3': 'Sonho em ter uma carreira que me dê a liberdade de fazer o trabalho do meu jeito e no tempo por mim programado ',
        'pergunta4': 'Segurança e estabilidade são mais importantes para mim do que liberdade e autonomia ',
        'pergunta5': 'Estou sempre procurando ideias que me permitam iniciar meu próprio negócio ',
        'pergunta6': 'Sentirei sucesso na minha carreira se sentir que contribuí verdadeiramente para o bem-estar da sociedade ',
        'pergunta7': 'Sonho com uma carreira na qual eu possa solucionar problemas ou vencer em situações extremamente desafiadoras ',
        'pergunta8': 'Prefiro deixar meu emprego a ser colocado em um trabalho que comprometa minha capacidade de satisfazer meus interesses pessoais e familiares ',
        'pergunta9': 'Só me sentirei bem-sucedido em minha carreira se puder desenvolver minhas habilidades técnicas e funcionais até o mais alto nível de competência ',
        'pergunta10': 'Sonho em dirigir uma organização complexa e tomar decisões que afetem muitas pessoas ',
        'pergunta11': 'Me sinto mais realizado em meu trabalho quando tenho total liberdade de definir minhas próprias tarefas, horários e procedimentos ',
        'pergunta12': 'Prefiro manter minha atividade atual a aceitar outra tarefa que possa colocar em risco minha segurança na empresa ',
        'pergunta13': 'Montar meu próprio negócio é mais importante para mim do que atingir uma alta posição gerencial como funcionário ',
        'pergunta14': 'Me sinto mais realizado em minha carreira quando posso utilizar meus talentos a serviço dos outros ',
        'pergunta15': 'Me sinto realizado em minha carreira apenas quando enfrento e supero desafios extremamente difíceis ',
        'pergunta16': 'Sonho com uma carreira que me permita integrar minhas necessidades pessoais, familiares e de trabalho ',
        'pergunta17': 'Me tornar um gerente técnico em minha área de especialização é mais atraente para mim do que me tornar um gerente geral em alguma organização ',
        'pergunta18': 'Me sentirei bem-sucedido em minha carreira apenas quando me tornar um gerente geral em alguma organização ',
        'pergunta19': 'Me sentirei bem-sucedido em minha carreira apenas quando alcançar total autonomia e liberdade ',
        'pergunta20': 'Procuro trabalhos em organizações que me deem senso de segurança e estabilidade  ',
        'pergunta21': 'Me sinto realizado em minha carreira quando sou capaz de construir alguma coisa que seja inteiramente resultado de minhas ideias e esforços ',
        'pergunta22': 'Utilizar minhas habilidades para tornar o mundo um lugar melhor para se viver e trabalhar é mais importante para mim do que alcançar uma posição gerencial de alto nível ',
        'pergunta23': 'Me sinto mais realizado em minha carreira quando soluciono problemas aparentemente insolúveis ou venço o que aparentemente era impossível de ser vencido ',
        'pergunta24': 'Me sinto bem-sucedido na vida apenas quando sou capaz de equilibrar minhas necessidades pessoais, familiares e de carreira ',
        'pergunta25': 'Prefiro sair da empresa onde estou a aceitar uma tarefa em esquema rotativo que me afaste da minha área de experiência ',
        'pergunta26': 'Me tornar um diretor geral é mais atraente para mim do que me tornar um diretor técnico em minha área de especialização ',
        'pergunta27': 'Para mim, poder fazer um trabalho do meu jeito, livre de regras e restrições, é mais importante do que segurança ',
        'pergunta28': 'Me sinto mais realizado em meu trabalho quando percebo que tenho total segurança financeira e estabilidade no trabalho ',
        'pergunta29': 'Me sinto bem-sucedido em meu trabalho apenas quando posso criar ou construir alguma coisa que seja inteiramente de minha autoria ',
        'pergunta30': 'Sonho em ter uma carreira que faça uma real contribuição à humanidade e à sociedade ',
        'pergunta31': 'Procuro oportunidades de trabalho que desafiem fortemente minhas habilidades para solucionar problemas ',
        'pergunta32': 'Equilibrar as exigências da minha vida pessoal e profissional é mais importante do que alcançar alta posição gerencial ',
        'pergunta33': 'Me sinto plenamente realizado em meu trabalho quando sou capaz de empregar minhas habilidades e talentos especiais ',
        'pergunta34': 'Prefiro sair da empresa onde estou a aceitar um cargo que me afaste do caminho da diretoria geral ',
        'pergunta35': 'Prefiro sair da empresa onde estou a aceitar um cargo que reduza minha autonomia e liberdade ',
        'pergunta36': 'Sonho em ter uma carreira que me dê senso de segurança e estabilidade ',
        'pergunta37': 'Sonho em iniciar e montar meu próprio negócio ',
        'pergunta38': 'Prefiro sair da empresa onde estou a aceitar um cargo que prejudique minha capacidade de ser útil aos outros ',
        'pergunta39': 'Trabalhar em problemas praticamente insolúveis para mim é mais importante do que alcançar uma posição gerencial de alto nível ',
        'pergunta40': 'Sempre procurei oportunidades de trabalho que minimizassem interferências com assuntos pessoais e familiares',
    }

    const formPerguntas = document.getElementById('formPerguntas');

    let i = 1;
    for (const pergunta in perguntas) {
        const divPergunta = document.createElement("div");
        divPergunta.id = "pergunta";
        divPergunta.className = "row"
        
        const divLabel = document.createElement("div");
        divLabel.className = "col-md-12"
        divLabel.innerHTML = "<label id='lblPergunta' for='"+pergunta+"'>"+ i + ". " + perguntas[pergunta]+"</label>";

        const divResposta = document.createElement("div");
        divResposta.className = "col-md-8"

        const selectResposta = document.createElement("select");
        selectResposta.id = pergunta;
        selectResposta.name = pergunta;
        selectResposta.className = 'form-select selectResposta';
        selectResposta.required = true;

        const defaultOption = document.createElement("option");
        defaultOption.text = "Selecione uma opção de 1 a 6";
        defaultOption.selected = true;
        defaultOption.value = "";
        defaultOption.disabled = true;
        selectResposta.add(defaultOption);
        
        const options = ["1", "2", "3", "4", "5", "6"];
        options.forEach(optionText => {
            const option = document.createElement("option");
            option.text = optionText;
            selectResposta.add(option);
        });

        const divPontosExtras = document.createElement("div");
        divPontosExtras.className = "col-md-4"

        // const labelPontosExtras = document.createElement("label");
        // labelPontosExtras.for = 'ponto-extra-'+pergunta;
        // labelPontosExtras.innerHTML = "+4 pontos?"
        // divPontosExtras.appendChild(labelPontosExtras);

        const selectPontoExtra = document.createElement("select");
        selectPontoExtra.name = 'ponto-extra-'+pergunta;
        selectPontoExtra.id = 'ponto-extra-'+pergunta;
        selectPontoExtra.className = 'form-select pontoExtra';

        const defaultOptionExtra = document.createElement("option");
        defaultOptionExtra.text = "Adicionar ponto extra?";
        defaultOptionExtra.selected = true;
        defaultOptionExtra.value = "";
        defaultOptionExtra.disabled = true;
        selectPontoExtra.add(defaultOptionExtra);

        const optionsPontoExtra = ["Sim", "Não"];
        optionsPontoExtra.forEach(optionText => {
            const option = document.createElement("option");
            option.text = optionText;

            if(optionText == "Sim"){
                    option.value = 4;
            }else if(option.value == "Não"){
                option.value = 0;
            }else{
                option.value = ""
            }
            selectPontoExtra.add(option);
        });

        divPergunta.appendChild(divLabel);
        divResposta.appendChild(selectResposta);
        divPergunta.appendChild(divResposta);
        divPontosExtras.appendChild(selectPontoExtra);
        divPergunta.appendChild(divPontosExtras);
        formPerguntas.appendChild(divPergunta);

        i++;
    }

    const button = document.createElement("button");
    button.id = "btnFormPerguntas";
    button.className = "btn";
    button.innerHTML = "Enviar";
    formPerguntas.appendChild(button);
</script>

<!-- Operações -->
<script>
    function verificaPontoExtra() {
        let pontosExtra = $('.pontoExtra').map((_,el) => el.value).get();

        const count = pontosExtra.filter(arr => {
            if (arr == 4) {
                return true;
            }
            return false;
        }).length;

        if(count >= 3){
            let selectsPontoExtra = $(".pontoExtra");
            selectsPontoExtra.each(function(){
                if($(this).val() != 4){
                    $(this).val(0)
                    $(this).attr("disabled", true);
                }
            })
        }else{
            let selectsPontoExtra = $(".pontoExtra");
            selectsPontoExtra.each(function(){
                $(this).attr("disabled", false);
            })
        }
    }

    $(".pontoExtra").on("change", function(){
        verificaPontoExtra();
    });
    
    function calculaCompetencia(array, perguntas){
        let calculo = 0;
        for(let i = 0; i < 5; i++){
            let numPergunta = perguntas[i];
            calculo += parseInt(array["pergunta"+numPergunta]);

            if("ponto-extra-pergunta"+numPergunta in array){
                calculo += parseInt(array["ponto-extra-pergunta"+numPergunta]);
            }                      
        }
        return (calculo/5).toFixed(2);
    }


    $("#btnFormPerguntas").on('click', function(e){
        e.preventDefault();

        let vazios = false;

        // $('select.selectResposta').each(function() {
        $('select').each(function() {
            if ($(this).val() === "" || $(this).val() == null) {
                $(this).css('border', '1px solid red');
                vazios = true;
            }else{
                $(this).css('border', 'var(--bs-border-width) solid var(--bs-border-color)');
            }
        });

        if($('input#inputNome').val() == ""){
            Swal.fire(
                'Ops...',
                'Preecha seu nome',
                'warning'
            );
            
            $("input#inputNome").css('border', '1px solid red');
            
        }else if (vazios) {
            $(this).css('border', 'var(--bs-border-width) solid var(--bs-border-color)');
            
            Swal.fire(
                'Ops...',
                'Responda todas as perguntas',
                'warning'
            );
        }else{ 

            let data = {};
            let array = $("#formPerguntas").serializeArray();

            array.forEach((item) => {
                if(item.name == "nome"){
                    data[item.name] = item.value;
                }else if(isNaN(parseInt(item.value))){
                    data[item.name] = 0;
                }else{
                    data[item.name] = parseInt(item.value);
                }
            });

            let competencias = {
                "A": calculaCompetencia(data, [1, 9, 17, 25, 33]),
                "B": calculaCompetencia(data, [2, 10, 18, 26, 34]),
                "C": calculaCompetencia(data, [3, 11, 19, 27, 35]),
                "D": calculaCompetencia(data, [4, 12, 20, 28, 36]),
                "E": calculaCompetencia(data, [5, 13, 21, 29, 37]),
                "F": calculaCompetencia(data, [6, 14, 22, 30, 38]),
                "G": calculaCompetencia(data, [7, 15, 23, 31, 39]),
                "H": calculaCompetencia(data, [8, 16, 24, 32, 40]), 
            }

            let maiorComp = 0;
            let maiorCompChave = [];

            for (let chave in competencias){
                if(competencias[chave] > maiorComp){
                    maiorComp = competencias[chave];
                    maiorCompChave = [];
                    maiorCompChave.push(chave);
                }else if(competencias[chave] == maiorComp){
                    maiorCompChave.push(chave);
                }
            }

            $("#compA").html(competencias.A);
            $("#compB").html(competencias.B);
            $("#compC").html(competencias.C);
            $("#compD").html(competencias.D);
            $("#compE").html(competencias.E);
            $("#compF").html(competencias.F);
            $("#compG").html(competencias.G);
            $("#compH").html(competencias.H);
            $("span#nome").html(data['nome'])
            
            let date = new Date();
            let day = date.getDate().toString().padStart(2, '0');
            let month = (date.getMonth() + 1).toString().padStart(2, '0');
            let year = date.getFullYear();
            let hours = date.getHours().toString().padStart(2, '0');
            let minutes = date.getMinutes().toString().padStart(2, '0');
            let seconds = date.getSeconds().toString().padStart(2, '0');

            let formattedDate = `${day}/${month}/${year} ${hours}:${minutes}:${seconds}`;

            $("span#data").html(formattedDate);
            $('#accordionA .accordion-collapse').collapse('hide');
            $('#accordionB .accordion-collapse').collapse('hide');
            $('#accordionC .accordion-collapse').collapse('hide');
            $('#accordionD .accordion-collapse').collapse('hide');
            $('#accordionE .accordion-collapse').collapse('hide');
            $('#accordionF .accordion-collapse').collapse('hide');
            $('#accordionG .accordion-collapse').collapse('hide');
            $('#accordionH .accordion-collapse').collapse('hide');

            if(!maiorCompChave.includes('A')){
                $("#A").hide();
            }

            if(!maiorCompChave.includes('B')){
                $("#B").hide();
            }

            if(!maiorCompChave.includes('C')){
                $("#C").hide();
            }

            if(!maiorCompChave.includes('D')){
                $("#D").hide();
            }

            if(!maiorCompChave.includes('E')){
                $("#E").hide();
            }

            if(!maiorCompChave.includes('F')){
                $("#F").hide();
            }

            if(!maiorCompChave.includes('G')){
                $("#G").hide();
            }

            if(!maiorCompChave.includes('H')){
                $("#H").hide();
            }

            const formData = new FormData();
            formData.set('entry.962974386', competencias.A); 
            formData.set('entry.1721896061', competencias.B); 
            formData.set('entry.1927216872', competencias.C); 
            formData.set('entry.1444699207', competencias.D); 
            formData.set('entry.1883564026', competencias.E); 
            formData.set('entry.452515622', competencias.F); 
            formData.set('entry.1599769206', competencias.G); 
            formData.set('entry.1118571761', competencias.H); 
            formData.set('entry.1901622950', window.sessionStorage.getItem('nome')); 
            formData.set('entry.1094469358', window.sessionStorage.getItem('email')); 

            let dataNascimento = window.sessionStorage.getItem('data');
            dataNascimento = dataNascimento.split('-');
            let dia = dataNascimento[2];
            let mes = dataNascimento[1];
            let ano = dataNascimento[0];

            formData.set('entry.1220030086_day', dia);
            formData.set('entry.1220030086_month', mes);
            formData.set('entry.1220030086_year', ano);
            formData.set('entry.190901847', window.sessionStorage.getItem('acessarResposta'));
            formData.set('entry.847681382', window.sessionStorage.getItem('enviarEmail'));

            const url = 'https://docs.google.com/forms/d/e/1FAIpQLSfkaeAsh7LLuCQdoGhEt1mPzi4YCdFQoBl9wKxpztxy_JuXAg/formResponse';
            fetch(url, {
                method: 'POST',
                mode: 'no-cors',
                body: formData
            })
            .then(response => {
                Swal.fire({
                    title: 'Uhul!',
                    text: 'Teste enviado com sucesso',
                    icon: 'success',
                    confirmButtonText: 'Ver resultado'
                }).then(function(){
                    $("#teste").hide();
                    $("#resultado").show();
                    $("#background").css("height", $('body').height());
                    window.scrollTo(0,0);
                });
            })
            .catch(error => {
                Swal.fire({
                    title: 'Ops...',
                    text: 'Houve um erro ao processar seu teste',
                    icon: 'error',
                    confirmButtonText: 'Tenter novamente'
                }).then(function(){
                    window.location.reload();
                })
            });
        }
    });

    $("#btnSalvarResultado").on("click", function(){
        $('#accordionA .accordion-collapse').collapse('show');
        $('#accordionB .accordion-collapse').collapse('show');
        $('#accordionC .accordion-collapse').collapse('show');
        $('#accordionD .accordion-collapse').collapse('show');
        $('#accordionE .accordion-collapse').collapse('show');
        $('#accordionF .accordion-collapse').collapse('show');
        $('#accordionG .accordion-collapse').collapse('show');
        $('#accordionH .accordion-collapse').collapse('show');

        html2canvas(document.querySelector("#main")).then(function(canvas) {
            let link = document.createElement('a');
            link.href = canvas.toDataURL();
            link.download = 'screenshot.png';
            link.click();
        });

        
    })

    $("#btnVoltarPerguntas").on("click", function(){
        $("#teste").show();
        $("#resultado").hide();
    });

    $(".selectResposta").on("change", function(){
        let val = $(this).val();
        if(val != 5 && val != 6){
            $("#ponto-extra-"+$(this).attr("id")).val("0");
            $("#ponto-extra-"+$(this).attr("id")).attr("disabled", true);
        }else{
            $("#ponto-extra-"+$(this).attr("id")).attr("disabled", false);
            verificaPontoExtra();
        }
    });
</script>